import{a as Be}from"./chunk-UUOZ5I5O.js";import{a as we,b as Ae,c as De}from"./chunk-BNZ7WW7Z.js";import{a as be,c as Oe,d as Se,e as Me,f as xe,h as Ie}from"./chunk-KXJUWLV2.js";import"./chunk-POI6IOX3.js";import"./chunk-FVXLOCB6.js";import{a as Ge,b as Ne}from"./chunk-63YCZVLA.js";import{a as Ve}from"./chunk-ZVQEXCBA.js";import"./chunk-KMETSRJJ.js";import{a as Fe,b as Re}from"./chunk-I5KRBIQX.js";import{c as Pe,d as Te,f as ke,j as Ee,l as R,o as Le}from"./chunk-LCLQ6LHO.js";import"./chunk-I25XGO3Q.js";import{b as ye,c as Ce}from"./chunk-GV272NIX.js";import"./chunk-ST5TOAOU.js";import{a as re,f as se,g as le,h as ce,j as me,k as de}from"./chunk-QDWBZOFB.js";import{a as Gt,b as Nt,f as jt,i as Ht,m as Wt,r as zt,s as Kt}from"./chunk-7A7BQKUP.js";import{a as ee,b as ie,c as oe,f as ne,h as ae}from"./chunk-P5GR2CX5.js";import{A as B,Ad as ue,B as P,Ba as l,Bd as _e,C as G,Ca as u,Cd as he,Db as nt,Dc as Yt,Ea as Ot,Eb as K,Ed as ge,Fc as $,Fd as fe,Gb as Pt,Gd as ve,Hb as Tt,I as T,Jb as kt,K as ht,Ka as St,La as Mt,Oa as tt,Qb as at,Qc as st,Rb as x,Rc as q,S as N,Sa as g,T as j,Ta as et,Tc as $t,Ua as c,Vb as Et,W as gt,Wa as W,Xa as xt,Y as ft,Zb as Lt,_ as vt,_b as Ft,aa as J,ac as Rt,bb as a,cb as r,cd as qt,da as k,db as z,dc as U,e as C,ed as lt,f as X,fb as b,ga as v,ha as H,ia as yt,ib as f,ja as Ct,jc as Dt,k as pt,kb as d,kc as Y,lb as It,lc as Vt,mb as wt,na as bt,nb as At,nc as F,oa as _,oc as Bt,p as ut,pa as h,pb as it,pd as Qt,qb as E,qc as rt,qd as Xt,rb as S,rd as Jt,sb as M,sd as Q,t as V,tb as ot,td as Zt,ub as m,ud as te,va as Z,vb as A,vd as ct,wa as w,wb as L,wc as Ut,y as _t,yd as pe}from"./chunk-M5WQ34XW.js";var ei=["panel"],ii=["*"];function oi(o,p){if(o&1){let t=b();a(0,"div",1,0),f("@panelAnimation.done",function(i){_(t);let n=d();return h(n._animationDone.next(i))}),wt(2),r()}if(o&2){let t=p.id,e=d();xt(e._classList),W("mat-mdc-autocomplete-visible",e.showPanel)("mat-mdc-autocomplete-hidden",!e.showPanel)("mat-primary",e._color==="primary")("mat-accent",e._color==="accent")("mat-warn",e._color==="warn"),c("id",e.id)("@panelAnimation",e.isOpen?"visible":"hidden"),et("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby(t))}}var ni=Dt("panelAnimation",[Bt("void, hidden",F({opacity:0,transform:"scaleY(0.8)"})),rt(":enter, hidden => visible",[Vt([Y("0.03s linear",F({opacity:1})),Y("0.12s cubic-bezier(0, 0, 0.2, 1)",F({transform:"scaleY(1)"}))])]),rt(":leave, visible => hidden",[Y("0.075s linear",F({opacity:0}))])]),ai=0,mt=class{constructor(p,t){this.source=p,this.option=t}},We=new J("mat-autocomplete-default-options",{providedIn:"root",factory:ri});function ri(){return{autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1}}var ze=(()=>{class o{get isOpen(){return this._isOpen&&this.showPanel}_setColor(t){this._color=t,this._changeDetectorRef.markForCheck()}set classList(t){this._classList=t,this._elementRef.nativeElement.className=""}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(t){this._hideSingleSelectionIndicator=t,this._syncParentProperties()}_syncParentProperties(){if(this.options)for(let t of this.options)t._changeDetectorRef.markForCheck()}constructor(t,e,i,n){this._changeDetectorRef=t,this._elementRef=e,this._defaults=i,this._activeOptionChanges=X.EMPTY,this._animationDone=new w,this.showPanel=!1,this._isOpen=!1,this.displayWith=null,this.optionSelected=new w,this.opened=new w,this.closed=new w,this.optionActivated=new w,this.id=`mat-autocomplete-${ai++}`,this.inertGroups=n?.SAFARI||!1,this.autoActiveFirstOption=!!i.autoActiveFirstOption,this.autoSelectActiveOption=!!i.autoSelectActiveOption,this.requireSelection=!!i.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new $t(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(t=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[t]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe(),this._animationDone.complete()}_setScrollTop(t){this.panel&&(this.panel.nativeElement.scrollTop=t)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(t){let e=new mt(this,t);this.optionSelected.emit(e)}_getPanelAriaLabelledby(t){if(this.ariaLabel)return null;let e=t?t+" ":"";return this.ariaLabelledby?e+this.ariaLabelledby:t}_skipPredicate(){return!1}static{this.\u0275fac=function(e){return new(e||o)(u(at),u(Z),u(We),u(Ut))}}static{this.\u0275cmp=H({type:o,selectors:[["mat-autocomplete"]],contentQueries:function(e,i,n){if(e&1&&(it(n,Q,5),it(n,Xt,5)),e&2){let s;S(s=M())&&(i.options=s),S(s=M())&&(i.optionGroups=s)}},viewQuery:function(e,i){if(e&1&&(E(Ot,7),E(ei,5)),e&2){let n;S(n=M())&&(i.template=n.first),S(n=M())&&(i.panel=n.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[v.None,"aria-label","ariaLabel"],ariaLabelledby:[v.None,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[v.HasDecoratorInputTransform,"autoActiveFirstOption","autoActiveFirstOption",x],autoSelectActiveOption:[v.HasDecoratorInputTransform,"autoSelectActiveOption","autoSelectActiveOption",x],requireSelection:[v.HasDecoratorInputTransform,"requireSelection","requireSelection",x],panelWidth:"panelWidth",disableRipple:[v.HasDecoratorInputTransform,"disableRipple","disableRipple",x],classList:[v.None,"class","classList"],hideSingleSelectionIndicator:[v.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",x]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],standalone:!0,features:[nt([{provide:Qt,useExisting:o}]),tt,K],ngContentSelectors:ii,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(e,i){e&1&&(It(),g(0,oi,3,16,"ng-template"))},styles:["div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:static;border-radius:var(--mat-autocomplete-container-shape);box-shadow:var(--mat-autocomplete-container-elevation-shadow);background-color:var(--mat-autocomplete-background-color)}.cdk-high-contrast-active div.mat-mdc-autocomplete-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden{visibility:hidden;pointer-events:none}mat-autocomplete{display:none}"],encapsulation:2,data:{animation:[ni]},changeDetection:0})}}return o})();var si={provide:Gt,useExisting:ft(()=>dt),multi:!0};var Ke=new J("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let o=k(R);return()=>o.scrollStrategies.reposition()}});function li(o){return()=>o.scrollStrategies.reposition()}var ci={provide:Ke,deps:[R],useFactory:li},dt=(()=>{class o{constructor(t,e,i,n,s,O,I,D,Ye,$e,qe){this._element=t,this._overlay=e,this._viewContainerRef=i,this._zone=n,this._changeDetectorRef=s,this._dir=I,this._formField=D,this._document=Ye,this._viewportRuler=$e,this._defaults=qe,this._componentDestroyed=!1,this._manuallyFloatingLabel=!1,this._viewportSubscription=X.EMPTY,this._canOpenOnNextFocus=!0,this._closeKeyEventStream=new pt,this._windowBlurHandler=()=>{this._canOpenOnNextFocus=this._document.activeElement!==this._element.nativeElement||this.panelOpen},this._onChange=()=>{},this._onTouched=()=>{},this.position="auto",this.autocompleteAttribute="off",this._aboveClass="mat-mdc-autocomplete-panel-above",this._overlayAttached=!1,this.optionSelections=_t(()=>{let y=this.autocomplete?this.autocomplete.options:null;return y?y.changes.pipe(N(y),j(()=>P(...y.map(Qe=>Qe.onSelectionChange)))):this._zone.onStable.pipe(T(1),j(()=>this.optionSelections))}),this._handlePanelKeydown=y=>{(y.keyCode===27&&!$(y)||y.keyCode===38&&$(y,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),y.stopPropagation(),y.preventDefault())},this._trackedModal=null,this._scrollStrategy=O}ngAfterViewInit(){let t=this._getWindow();typeof t<"u"&&this._zone.runOutsideAngular(()=>t.addEventListener("blur",this._windowBlurHandler))}ngOnChanges(t){t.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){let t=this._getWindow();typeof t<"u"&&t.removeEventListener("blur",this._windowBlurHandler),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&q(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return P(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(G(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(G(()=>this._overlayAttached)):ut()).pipe(V(t=>t instanceof Jt?t:null))}get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return P(B(this._document,"click"),B(this._document,"auxclick"),B(this._document,"touchend")).pipe(G(t=>{let e=Yt(t),i=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,n=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;return this._overlayAttached&&e!==this._element.nativeElement&&this._document.activeElement!==this._element.nativeElement&&(!i||!i.contains(e))&&(!n||!n.contains(e))&&!!this._overlayRef&&!this._overlayRef.overlayElement.contains(e)}))}writeValue(t){Promise.resolve(null).then(()=>this._assignOptionValue(t))}registerOnChange(t){this._onChange=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this._element.nativeElement.disabled=t}_handleKeydown(t){let e=t.keyCode,i=$(t);if(e===27&&!i&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&e===13&&this.panelOpen&&!i)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let n=this.autocomplete._keyManager.activeItem,s=e===38||e===40;e===9||s&&!i&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):s&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(s||this.autocomplete._keyManager.activeItem!==n)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(t){let e=t.target,i=e.value;if(e.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let n=this.autocomplete.options?.find(s=>s.selected);if(n){let s=this._getDisplayValue(n.value);i!==s&&n.deselect(!1)}}if(this._canOpen()&&this._document.activeElement===t.target){let n=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(n)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_floatLabel(t=!1){this._formField&&this._formField.floatLabel==="auto"&&(t?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let t=this._zone.onStable.pipe(T(1)),e=this.autocomplete.options.changes.pipe(gt(()=>this._positionStrategy.reapplyLastPosition()),ht(0));return P(t,e).pipe(j(()=>(this._zone.run(()=>{let i=this.panelOpen;this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit())}),this.panelClosingActions)),T(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(t){let e=this.autocomplete;return e&&e.displayWith?e.displayWith(t):t}_assignOptionValue(t){let e=this._getDisplayValue(t);t==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(e??"")}_updateNativeInputValue(t){this._formField?this._formField._control.value=t:this._element.nativeElement.value=t,this._previousValue=t}_setValueAndClose(t){let e=this.autocomplete,i=t?t.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),e._emitSelectEvent(i),this._element.nativeElement.focus()):e.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),e._animationDone?e._animationDone.pipe(T(1)).subscribe(()=>this._onChange(null)):this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(t,e){this.autocomplete?.options?.forEach(i=>{i!==t&&i.selected&&i.deselect(e)})}_openPanelInternal(t=this._element.nativeElement.value){if(this._attachOverlay(t),this._floatLabel(),this._trackedModal){let e=this.autocomplete.id;st(this._trackedModal,"aria-owns",e)}}_attachOverlay(t){this.autocomplete;let e=this._overlayRef;e?(this._positionStrategy.setOrigin(this._getConnectedElement()),e.updateSize({width:this._getPanelWidth()})):(this._portal=new ke(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),e=this._overlay.create(this._getOverlayConfig()),this._overlayRef=e,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&e&&e.updateSize({width:this._getPanelWidth()})})),e&&!e.hasAttached()&&(e.attach(this._portal),this._valueOnAttach=t,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let t=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=t.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=t.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new Ee({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,panelClass:this._defaults?.overlayPanelClass})}_getOverlayPosition(){let t=this._overlay.position().flexibleConnectedTo(this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1);return this._setStrategyPositions(t),this._positionStrategy=t,t}_setStrategyPositions(t){let e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,n=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],s;this.position==="above"?s=n:this.position==="below"?s=e:s=[...e,...n],t.withPositions(s)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let t=this.autocomplete;if(t.autoActiveFirstOption){let e=-1;for(let i=0;i<t.options.length;i++)if(!t.options.get(i).disabled){e=i;break}t._keyManager.setActiveItem(e)}else t._keyManager.setActiveItem(-1)}_canOpen(){let t=this._element.nativeElement;return!t.readOnly&&!t.disabled&&!this.autocompleteDisabled}_getWindow(){return this._document?.defaultView||window}_scrollToOption(t){let e=this.autocomplete,i=Zt(t,e.options,e.optionGroups);if(t===0&&i===1)e._setScrollTop(0);else if(e.panel){let n=e.options.toArray()[t];if(n){let s=n._getHostElement(),O=te(s.offsetTop,s.offsetHeight,e._getScrollTop(),e.panel.nativeElement.offsetHeight);e._setScrollTop(O)}}}_applyModalPanelOwnership(){let t=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!t)return;let e=this.autocomplete.id;this._trackedModal&&q(this._trackedModal,"aria-owns",e),st(t,"aria-owns",e),this._trackedModal=t}_clearFromModal(){if(this._trackedModal){let t=this.autocomplete.id;q(this._trackedModal,"aria-owns",t),this._trackedModal=null}}static{this.\u0275fac=function(e){return new(e||o)(u(Z),u(R),u(Mt),u(St),u(at),u(Ke),u(qt,8),u(se,9),u(Et,8),u(Pe),u(We,8))}}static{this.\u0275dir=Ct({type:o,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(e,i){e&1&&f("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(s){return i._handleInput(s)})("keydown",function(s){return i._handleKeydown(s)})("click",function(){return i._handleClick()}),e&2&&et("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[v.None,"matAutocomplete","autocomplete"],position:[v.None,"matAutocompletePosition","position"],connectedTo:[v.None,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[v.None,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[v.HasDecoratorInputTransform,"matAutocompleteDisabled","autocompleteDisabled",x]},exportAs:["matAutocompleteTrigger"],standalone:!0,features:[nt([si]),tt,bt]})}}return o})(),Ue=(()=>{class o{static{this.\u0275fac=function(e){return new(e||o)}}static{this.\u0275mod=yt({type:o})}static{this.\u0275inj=vt({providers:[ci],imports:[Le,ct,lt,U,Te,ct,lt]})}}return o})();var di=["itemInput"];function pi(o,p){o&1&&(a(0,"div",8),z(1,"mat-spinner",9),a(2,"p"),m(3,"Loading your grocery list..."),r()())}function ui(o,p){if(o&1&&(a(0,"span",18),m(1),r()),o&2){let t=d(2);l(),A(t.activeItems.length)}}function _i(o,p){o&1&&z(0,"mat-spinner",22)}function hi(o,p){if(o&1&&(a(0,"mat-icon"),m(1),r()),o&2){let t=d(3);l(),A(t.isSortingByStore?"undo":"network_intelligence_update")}}function gi(o,p){if(o&1){let t=b();a(0,"div",19)(1,"button",20),f("click",function(){_(t);let i=d(2);return h(i.isSortingByStore?i.toggleStoreSort():i.sortByStoreLayout())}),g(2,_i,1,0,"mat-spinner",21)(3,hi,2,1,"mat-icon",7),m(4),r()()}if(o&2){let t=d(2);l(),At("matTooltip",t.isSortingByStore?"Revert to original order":"Sort by store layout order"),c("color",t.isSortingByStore?"accent":"primary")("disabled",t.isSorting),l(),c("ngIf",t.isSorting),l(),c("ngIf",!t.isSorting),l(),L(" ",t.isSortingByStore?"Unsort":"Smart sort"," ")}}function fi(o,p){if(o&1){let t=b();a(0,"button",23),f("click",function(){_(t);let i=d(2);return h(i.showAddForm())}),a(1,"mat-icon"),m(2,"add"),r(),m(3," Add item "),r()}}function vi(o,p){if(o&1&&(a(0,"mat-option",30)(1,"mat-icon"),m(2,"history"),r(),m(3),r()),o&2){let t=p.$implicit;c("value",t),l(3),L(" ",t," ")}}function yi(o,p){if(o&1){let t=b();a(0,"div",24)(1,"mat-form-field",25)(2,"mat-label"),m(3,"Item name"),r(),a(4,"input",26,1),f("keyup.enter",function(){_(t);let i=d(2);return h(i.addItem())})("keyup.escape",function(){_(t);let i=d(2);return i.showAddItemForm=!1,h(i.itemControl.setValue(""))}),r(),a(6,"mat-autocomplete",null,2),g(8,vi,4,2,"mat-option",27),Pt(9,"async"),r()(),a(10,"button",28),f("click",function(){_(t);let i=d(2);return h(i.addItem())}),a(11,"mat-icon"),m(12,"check"),r()(),a(13,"button",29),f("click",function(){_(t);let i=d(2);return i.showAddItemForm=!1,h(i.itemControl.setValue(""))}),a(14,"mat-icon"),m(15,"close"),r()()()}if(o&2){let t=ot(7),e=d(2);l(4),c("formControl",e.itemControl)("matAutocomplete",t),l(4),c("ngForOf",Tt(9,4,e.filteredItems)),l(2),c("disabled",!(e.itemControl.value!=null&&e.itemControl.value.trim()))}}function Ci(o,p){o&1&&z(0,"mat-spinner",38)}function bi(o,p){if(o&1&&(a(0,"mat-icon"),m(1),r()),o&2){let t=d().$implicit,e=d(3);l(),L(" ",e.itemLocations.has(t.id)?"place":"not_listed_location"," ")}}function Oi(o,p){if(o&1){let t=b();a(0,"mat-list-item")(1,"mat-checkbox",32),f("change",function(){let i=_(t).$implicit,n=d(3);return h(n.toggleItem(i.id))}),r(),a(2,"span",33),m(3),r(),a(4,"div",34)(5,"button",35),f("click",function(){let i=_(t).$implicit,n=d(3);return h(n.getStoreLocation(i))}),g(6,Ci,1,0,"mat-spinner",36)(7,bi,2,1,"mat-icon",7),r(),a(8,"button",37),f("click",function(){let i=_(t).$implicit,n=d(3);return h(n.deleteItem(i.id))}),a(9,"mat-icon"),m(10,"delete"),r()()()()}if(o&2){let t=p.$implicit,e=d(3);l(),c("checked",t.completed),l(2),A(t.name),l(2),W("found",e.itemLocations.has(t.id)),c("matTooltip",e.getLocationTooltip(t))("disabled",e.isLoadingLocation(t.id)),l(),c("ngIf",e.isLoadingLocation(t.id)),l(),c("ngIf",!e.isLoadingLocation(t.id))}}function Si(o,p){if(o&1&&(a(0,"mat-list"),g(1,Oi,11,8,"mat-list-item",31),r()),o&2){let t=d(2);l(),c("ngForOf",t.activeItems)}}function Mi(o,p){o&1&&(a(0,"div",39)(1,"mat-icon"),m(2,"shopping_cart"),r(),a(3,"p"),m(4,"No items in your grocery list."),r(),a(5,"p",40),m(6,"Add some above to get started!"),r()())}function xi(o,p){if(o&1){let t=b();a(0,"button",45),f("click",function(){_(t);let i=d(3);return h(i.clearCompleted())}),a(1,"mat-icon"),m(2,"delete_sweep"),r(),m(3," Delete all "),r()}}function Ii(o,p){if(o&1){let t=b();a(0,"mat-list-item",46)(1,"mat-checkbox",32),f("change",function(){let i=_(t).$implicit,n=d(3);return h(n.toggleItem(i.id))}),r(),a(2,"span",47),m(3),r(),a(4,"div",34)(5,"button",37),f("click",function(){let i=_(t).$implicit,n=d(3);return h(n.deleteItem(i.id))}),a(6,"mat-icon"),m(7,"delete"),r()()()()}if(o&2){let t=p.$implicit;l(),c("checked",t.completed),l(2),A(t.name)}}function wi(o,p){if(o&1&&(a(0,"mat-card",41)(1,"mat-card-header")(2,"mat-card-title"),m(3," Crossed off "),a(4,"span",42),m(5),r()(),a(6,"div",19),g(7,xi,4,0,"button",43),r()(),a(8,"mat-card-content")(9,"mat-list"),g(10,Ii,8,2,"mat-list-item",44),r()()()),o&2){let t=d(2);l(5),A(t.completedItems.length),l(2),c("ngIf",t.completedItems.length>0),l(3),c("ngForOf",t.completedItems)}}function Ai(o,p){if(o&1&&(a(0,"div")(1,"mat-card",10)(2,"mat-card-header")(3,"mat-card-title"),m(4," Remaining items "),g(5,ui,2,1,"span",11),r(),g(6,gi,5,6,"div",12),r(),a(7,"mat-card-content")(8,"div",13),g(9,fi,4,0,"button",14)(10,yi,16,6,"div",15),r(),g(11,Si,2,1,"mat-list",16)(12,Mi,7,0,"ng-template",null,0,kt),r()(),g(14,wi,11,3,"mat-card",17),r()),o&2){let t=ot(13),e=d();l(5),c("ngIf",e.activeItems.length>0),l(),c("ngIf",e.activeItems.length>0),l(3),c("ngIf",!e.showAddItemForm),l(),c("ngIf",e.showAddItemForm),l(),c("ngIf",e.activeItems.length>0)("ngIfElse",t),l(3),c("ngIf",e.completedItems.length>0)}}var Go=(()=>{class o{constructor(t){this.groceryService=t,this.newItemName="",this.itemControl=new Ht(""),this.itemLocations=new Map,this.itemCategories=new Map,this.loadingLocations=new Set,this.isSortingByStore=!1,this.isSorting=!1,this.showAddItemForm=!1,this.githubAi=k(Ve),this.snackBar=k(Ge),this.storeSectionOrder=["Produce","Bakery","Deli/Meat","Dairy","Frozen","Canned Goods","Dry Goods","Condiments","Snacks","Beverages","Health/Beauty","Household","Other"]}ngOnInit(){this.filteredItems=this.itemControl.valueChanges.pipe(N(""),V(t=>this._filterItems(t||"")))}showAddForm(){this.showAddItemForm=!0,setTimeout(()=>{this.itemInput?.nativeElement.focus()},0)}preloadLocations(){return C(this,null,function*(){this.githubAi.isConfigured()&&setTimeout(()=>C(this,null,function*(){let t=this.activeItems;for(let e=0;e<t.length;e++){let i=t[e];this.itemLocations.has(i.id)||(yield new Promise(n=>setTimeout(n,e*300)),this.getStoreLocation(i).catch(n=>{console.warn(`Failed to preload location for ${i.name}:`,n)}))}}),500)})}addItem(){return C(this,null,function*(){let t=this.itemControl.value?.trim()||"";if(t){let e=t.split(" ").map(i=>i.charAt(0).toUpperCase()+i.slice(1).toLowerCase()).join(" ");yield this.groceryService.addItem(e),this.itemControl.setValue(""),this.newItemName="",this.showAddItemForm=!1,this.snackBar.open(`Added "${e}" to your list`,"Close",{duration:2e3})}})}_filterItems(t){let e=t.toLowerCase();return this.getUniqueCompletedItemNames().filter(n=>n.toLowerCase().includes(e))}getUniqueCompletedItemNames(){let t=this.completedItems.map(e=>e.name);return Array.from(new Set(t)).sort()}deleteItem(t){return C(this,null,function*(){try{yield this.groceryService.deleteItem(t)}catch(e){console.error("Error deleting item:",e),this.snackBar.open("Failed to delete item. Please try again.","Close",{duration:3e3})}})}toggleItem(t){return C(this,null,function*(){try{let i=[...this.groceryService.getActiveItems(),...this.groceryService.getCompletedItems()].find(n=>n.id===t);yield this.groceryService.toggleItem(t),i&&(i.completed?this.snackBar.open(`"${i.name}" moved back to shopping list`,"Close",{duration:2e3}):this.snackBar.open(`"${i.name}" crossed off the list`,"Undo",{duration:7e3}).onAction().subscribe(()=>{this.toggleItem(t)}))}catch(e){console.error("Error toggling item:",e),this.snackBar.open("Failed to update item. Please try again.","Close",{duration:3e3})}})}sortByStoreLayout(){return C(this,null,function*(){if(!this.githubAi.isConfigured()){this.snackBar.open("AI is not configured. Add your GitHub token to use this feature.","Close",{duration:4e3});return}if(this.activeItems.length!==0){this.isSorting=!0;try{let t=this.activeItems.filter(e=>!this.itemCategories.has(e.id));if(t.length>0){let e=t.map(s=>s.name).join(", "),i=`Categorize these grocery items into store sections. For each item, choose ONE category from this list: ${this.storeSectionOrder.join(", ")}.

Items: ${e}

Return ONLY a JSON object mapping each item name to its category. Example format:
{
  "milk": "Dairy",
  "apples": "Produce",
  "bread": "Bakery"
}`,n=yield this.githubAi.generateContent(i);if(n.success){let s=n.text.match(/\{[\s\S]*\}/);if(s){let O=JSON.parse(s[0]);t.forEach(I=>{let D=O[I.name];D&&this.itemCategories.set(I.id,D)})}}}this.isSortingByStore=!0,this.snackBar.open("Items sorted by store layout! Toggle off to restore original order.","Close",{duration:3e3})}catch(t){console.error("Error sorting by store layout:",t),this.snackBar.open("Failed to sort items. Please try again.","Close",{duration:3e3})}finally{this.isSorting=!1}}})}toggleStoreSort(){this.isSortingByStore=!this.isSortingByStore}clearCompleted(){return C(this,null,function*(){confirm("Delete all completed items?")&&(yield this.groceryService.clearCompleted())})}get activeItems(){let t=this.groceryService.getActiveItems();return this.isSortingByStore?t.sort((e,i)=>{let n=this.itemCategories.get(e.id)||"Other",s=this.itemCategories.get(i.id)||"Other",O=this.storeSectionOrder.indexOf(n),I=this.storeSectionOrder.indexOf(s);return O-I}):t}get completedItems(){return this.groceryService.getCompletedItems()}getStoreLocation(t){return C(this,null,function*(){if(!this.githubAi.isConfigured()){this.snackBar.open("GitHub AI is not configured. Add your token to use this feature.","Close",{duration:4e3});return}if(!(this.itemLocations.has(t.id)||this.loadingLocations.has(t.id))){this.loadingLocations.add(t.id);try{let e=`In which aisle or section of a grocery store would I typically find "${t.name}"? Give a brief, specific answer in one sentence. For example: "Produce section" or "Dairy aisle, near the milk" or "Baking aisle, with flour and sugar".`,i=yield this.githubAi.generateContent(e);if(i.success)this.itemLocations.set(t.id,i.text.trim());else throw new Error(i.error||"Failed to get location")}catch(e){console.error("Error getting store location:",e),this.snackBar.open("Failed to get store location. Please try again.","Close",{duration:3e3})}finally{this.loadingLocations.delete(t.id)}}})}getLocationTooltip(t){return this.loadingLocations.has(t.id)?"Finding location...":this.itemLocations.get(t.id)||"Click to find in store"}isLoadingLocation(t){return this.loadingLocations.has(t)}static{this.\u0275fac=function(e){return new(e||o)(u(De))}}static{this.\u0275cmp=H({type:o,selectors:[["app-grocery-list"]],viewQuery:function(e,i){if(e&1&&E(di,5),e&2){let n;S(n=M())&&(i.itemInput=n.first)}},standalone:!0,features:[K],decls:8,vars:4,consts:[["noItems",""],["itemInput",""],["auto","matAutocomplete"],[1,"grocery-container"],[1,"header"],["matTooltipPosition","below",1,"storage-indicator",3,"matTooltip"],["class","loading-state",4,"ngIf"],[4,"ngIf"],[1,"loading-state"],["diameter","50"],[1,"items-card","open-items"],["class","count-badge",4,"ngIf"],["class","actions",4,"ngIf"],[1,"inline-add-item"],["mat-fab","","extended","","color","primary","class","add-button",3,"click",4,"ngIf"],["class","inline-add-form",4,"ngIf"],[4,"ngIf","ngIfElse"],["class","items-card crossed-off-items",4,"ngIf"],[1,"count-badge"],[1,"actions"],["mat-stroked-button","",3,"click","color","disabled","matTooltip"],["diameter","16",4,"ngIf"],["diameter","16"],["mat-fab","","extended","","color","primary",1,"add-button",3,"click"],[1,"inline-add-form"],["appearance","outline",1,"inline-input"],["matInput","","placeholder","Enter item","autocomplete","off",3,"keyup.enter","keyup.escape","formControl","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-mini-fab","","color","primary","matTooltip","Add item",1,"add-button",3,"click","disabled"],["mat-mini-fab","","matTooltip","Cancel",1,"cancel-button",3,"click"],[3,"value"],[4,"ngFor","ngForOf"],["matListItemIcon","",3,"change","checked"],["matListItemTitle",""],["matListItemMeta","",1,"item-actions"],["mat-icon-button","","matTooltipPosition","below",1,"location-button",3,"click","matTooltip","disabled"],["diameter","20",4,"ngIf"],["mat-icon-button","","color","warn",3,"click"],["diameter","20"],[1,"no-items"],[1,"subtitle"],[1,"items-card","crossed-off-items"],[1,"count-badge","completed"],["mat-stroked-button","",3,"click",4,"ngIf"],["class","completed-item",4,"ngFor","ngForOf"],["mat-stroked-button","",3,"click"],[1,"completed-item"],["matListItemTitle","",1,"completed-text"]],template:function(e,i){e&1&&(a(0,"div",3)(1,"div",4)(2,"h1"),m(3,"Grocery List"),r(),a(4,"mat-icon",5),m(5),r()(),g(6,pi,4,0,"div",6)(7,Ai,15,7,"div",7),r()),e&2&&(l(4),c("matTooltip",i.groceryService.useFirestore()?"Cloud storage active":"Using local storage"),l(),L(" ",i.groceryService.useFirestore()?"cloud_done":"cloud_off"," "),l(),c("ngIf",i.groceryService.isLoading()),l(),c("ngIf",!i.groceryService.isLoading()))},dependencies:[U,Lt,Ft,Rt,zt,Nt,jt,Kt,Wt,ae,ee,oe,ne,ie,Ie,Me,xe,Se,be,Oe,de,me,le,re,ge,pe,he,_e,ue,ve,fe,Ae,we,ce,Ce,ye,Be,Re,Fe,Ne,Ue,ze,Q,dt],styles:[".grocery-container[_ngcontent-%COMP%]{max-width:800px;margin:0 auto}.grocery-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;flex-wrap:wrap;gap:16px;margin-bottom:8px}.grocery-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin:0}.grocery-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .storage-indicator[_ngcontent-%COMP%]{color:#666;font-size:24px}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666}.add-item-card[_ngcontent-%COMP%]{margin-bottom:20px}.add-item-form[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.add-item-form[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{flex:1}.add-item-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.items-card[_ngcontent-%COMP%]{margin-bottom:20px}.items-card.open-items[_ngcontent-%COMP%]{background-color:#ffd}.items-card.crossed-off-items[_ngcontent-%COMP%]{background-color:#f5f5f5}.items-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.items-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .count-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;padding:0 8px;background:#2196f3;color:#fff;border-radius:12px;font-size:.875rem;font-weight:500}.items-card[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]   .count-badge.completed[_ngcontent-%COMP%]{background:#4caf50}.items-card[_ngcontent-%COMP%]   mat-list[_ngcontent-%COMP%]{padding-top:0}.items-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]{height:auto;min-height:48px;padding:8px 0;border-bottom:1px solid #e0e0e0}.items-card[_ngcontent-%COMP%]   mat-list-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.inline-add-item[_ngcontent-%COMP%]{margin-bottom:16px;padding-bottom:16px;border-bottom:2px solid #e0e0e0}.inline-add-item[_ngcontent-%COMP%]   .add-item-button[_ngcontent-%COMP%]{width:100%}.inline-add-item[_ngcontent-%COMP%]   .inline-add-form[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-start}.inline-add-item[_ngcontent-%COMP%]   .inline-add-form[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]{flex:1}.inline-add-item[_ngcontent-%COMP%]   .inline-add-form[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]{margin-top:8px;width:40px;height:40px}.inline-add-item[_ngcontent-%COMP%]   .inline-add-form[_ngcontent-%COMP%]   .add-button[_ngcontent-%COMP%]:not(:disabled){background-color:#4caf50;color:#fff}.inline-add-item[_ngcontent-%COMP%]   .inline-add-form[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{margin-top:8px;width:40px;height:40px;background-color:#f5f5f5;color:#ff4081}.item-actions[_ngcontent-%COMP%]{display:flex;gap:4px;align-items:center}.location-button[_ngcontent-%COMP%]{color:#ebdb30}.location-button[_ngcontent-%COMP%]:disabled{opacity:.6}.location-button.found[_ngcontent-%COMP%]{color:#2196f3}.location-button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin:2px}  .location-tooltip{font-size:14px;max-width:250px;text-align:left;padding:12px;background-color:#616161f2}  .location-tooltip .mdc-tooltip__surface{line-height:1.4}.completed-text[_ngcontent-%COMP%]{text-decoration:line-through;color:#999}.mat-mdc-card-header[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.actions[_ngcontent-%COMP%]{gap:8px;margin-left:auto}.no-items[_ngcontent-%COMP%]{text-align:center;color:#999;padding:48px 20px}.no-items[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.3}.no-items[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0}.no-items[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.9rem}@media (max-width: 767px){.grocery-container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.add-item-form[_ngcontent-%COMP%]{flex-direction:column}.add-item-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-top:0}}"]})}}return o})();export{Go as GroceryListComponent};
